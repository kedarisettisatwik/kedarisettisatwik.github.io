<html>
  <head>
 <title>notes</title>    
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <!-- google fonts -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.1/html2pdf.bundle.min.js">
    </script>
   <style>
       *{
           margin:0;
           padding:0;
       }
       body{
           width:100vw;
       }
       
       
       .header{
           overflow: hidden;
           margin-top:100px;
           height:auto;
           position: relative;
           width:100%;
           display: flex;
           align-items: center;
           justify-content: center;
           flex-direction: column;
       }
       .header h1{
           font-size:500%;
           font-weight:lighter;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           margin-bottom:10px;
       }
       .header button{
           font-size:250%;
           font-weight:bolder;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           margin-bottom:10px;
           outline:0;
           border:none;
           background-color: darkblue;
           color:white;
           padding:30px;
           margin:30px 0px;
           border-radius:30px;
       }
       .container{
           margin-top:100px;
           height:auto;
           position: relative;
           width:100%;
           display: flex;
           align-items: center;
           justify-content: center;
           flex-direction: column;
       }
       #pop{
           font-size:300%;
           font-weight:bolder;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           background-color:antiquewhite;
           padding:30px;
           border-radius:20px;
           border:2px solid black;
       }
       #change,#del{
           font-size:220%;
           font-weight:bolder;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           padding:30px;
           border-radius:20px;
           border:2px solid black;
           margin:20px 0px;
           display:none;
       }
       #change{
           background-color:orange;
           color:black;
       }
       #del{
           background-color:brown;
           color:white;
       }
       .container1{
           height:auto;
           position: relative;
           width:100%;
           display: flex;
           align-items: center;
           justify-content: center;
           flex-direction: column;
       }
       .box{
           padding:50px 50px;
           overflow: hidden;
           width:80%;
           margin-bottom:50px;
           height:auto;
           position: relative;
           border-radius:20px;
       }
       .title{
           position: relative;
           font-size:300%;
           font-weight:bolder;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           padding:30px;
           border-radius:20px;
           margin-left:100px;
       }
       .open{
           display: flex;
           justify-content: center;
           align-items: center;
           position:absolute;
           top:4.5em;
           right:5em;
           width:6em;
           height:6em;
           background-color:darkblue;
           border:none;
           outline:none;
       }
       .open::before{
           position: absolute;
           display: flex;
           justify-content: center;
           align-items: center;
           transform:translateY(-1em);
           content: '';
           width:80%;
           height:8%;
           background-color:white;
       }
       .open::after{
           position: absolute;
           display: flex;
           justify-content: center;
           align-items: center;
           transform:translateY(1em);
           content: '';
           width:80%;
           height:8%;
           background-color:white;
       }
       .active{
           display: flex;
           justify-content: center;
           align-items: center;
           position:absolute;
           top:4.5em;
           right:5em;
           width:5em;
           height:5em;
           background-color:red;
           border:none;
           outline:none;
       }
       .active::before{
           position: absolute;
           display: flex;
           justify-content: center;
           align-items: center;
           transform:translateY(-1em);
           content: '';
           transform:rotateZ(-45deg);
           width:80%;
           height:8%;
           background-color:white;
       }
       .active::after{
           position: absolute;
           display: flex;
           justify-content: center;
           align-items: center;
           transform:translateY(1em);
           transform:rotateZ(45deg);
           content: '';
           width:80%;
           height:8%;
           background-color:white;
       }
       .opt{
           position: relative;
           width:100%;
           background-color: aliceblue;
           margin:50px auto;
           display:none;
           padding:20px 0px;
       }
       .boxbox{
           width:100%;
           display:flex;
           justify-content: center;
           align-items: center;
       }
       .pdfpdf,.savesave,.copycopy{
            position:relative;
          font-size:250%;
           font-weight:bolder;
           letter-spacing:5px;
           font-family: 'Roboto', sans-serif;
           padding:30px;
           background-color:transparent;
           border:none;
           outline:0;
           border-bottom:5px solid black;
       }
       .inputtext{
           margin-top:20px;
           min-height:300px;
           resize: vertical;
           width:100%;
           text-align: center;
           letter-spacing:4px;
           font-family: 'Roboto', sans-serif;
           font-size:210%;
           display:none;
           padding:30px 10px;
           word-wrap: break-word;
       }
  </style>
  </head>
    <body>
        <section class="header">
        <h1>write notes..</h1>
    <button onclick="create_new()">+ create new book</button>
    <button  id="change" onclick="title1()">change title of a book</button >    
        <button id="del" onclick="delete1()">delete a book</button >
        </section>
        
        <section class="container">
        <div id="pop">start creating a book</div>
        </section>
        
    <section class="container1" id="base1">
        
    </section>

    
        
    <script>
       if (localStorage.getItem("numberof")){
        
       }else{
           var initial = 0;
           localStorage.setItem("numberof",initial);
    localStorage.setItem( "kedarbooktitles",'[]');
    localStorage.setItem( "kedarparagraphs",'[]');       
       }
       
    
    function create_new(){
    var n = parseInt(localStorage.getItem("numberof"));
    localStorage.setItem("numberof",n+1); 
    var savetitle = prompt("enter the title of book ");

var oldlist = JSON.parse(localStorage.getItem("kedarbooktitles"));
    oldlist.push(savetitle);
    localStorage.setItem("kedarbooktitles", JSON.stringify(oldlist));
var oldlist1 = JSON.parse(localStorage.getItem("kedarparagraphs"));
    oldlist1.push(savetitle);
    localStorage.setItem("kedarparagraphs", JSON.stringify(oldlist1));    
    location.reload();
    }
    
    function board(){
        var nn = parseInt(localStorage.getItem("numberof"));
        var bglist = ["antiquewhite","wheat","pink","beige","chartreuse"]
        for (var i = 0;i<nn;i++){
            var base = document.getElementById("base1");
            var el1 = document.createElement("div");
            var el2 = document.createElement("div");
            var el3 = document.createElement("button");
            el1.setAttribute("class","box");
            el2.setAttribute("class","title");
            el3.setAttribute("class","open");
            el3.setAttribute("id",i);
            base.appendChild(el1);
            var li = JSON.parse(localStorage.getItem("kedarbooktitles"));
            var llii = JSON.parse(localStorage.getItem("kedarparagraphs"));
            el2.innerHTML = (i + 1) + " . "+ li[i] ;
            el1.style.backgroundColor = bglist[i%5];
            el1.appendChild(el2);
            el1.appendChild(el3);
            
            var el4 = document.createElement("div");
            el4.setAttribute("class","opt");
            el4.setAttribute("id","options"+i);
            var el5 = document.createElement("div");
            el5.setAttribute("class","boxbox");
            var el6 = document.createElement("button");
            var el7 = document.createElement("button");
            var el8 = document.createElement("button");
            el6.setAttribute("class","pdfpdf");
            el7.setAttribute("class","savesave");
            el8.setAttribute("class","copycopy");
            el6.innerHTML = "create pdf";
            el7.innerHTML = "save";
            el8.innerHTML = "copy-text";
            el4.appendChild(el5);
            el5.appendChild(el6);
            el5.appendChild(el7);
            el5.appendChild(el8);
            el6.setAttribute("id",i);
            el7.setAttribute("id",i);
            el8.setAttribute("id",i);
            var el9 = document.createElement("textarea");
            el9.setAttribute("class","inputtext");
            el9.setAttribute("id","in"+i);
            el9.innerHTML = llii[i];
            el1.appendChild(el9);
            el1.appendChild(el4);
        }
    }
    board();
    
    var btns = document.getElementsByClassName("open");
    for(var k = 0;k<btns.length;k++){
        var p = btns.item(k);
        p.addEventListener("click",openbook,false);
    }    
    
    function openbook(e){
        var selected = parseInt(e.target.id);
        if (e.target.classList.contains("active")){
            var selected = parseInt(e.target.id);
        var ele1 = document.getElementById("options"+selected);
        ele1.style.display = "none";
        var ele2 = document.getElementById("in"+selected);
        ele2.style.display = "none";
            e.target.classList.remove("active");
            e.target.classList.add("open");
        }else{
            var ele1 = document.getElementById("options"+selected);
        ele1.style.display = "block";
        var ele2 = document.getElementById("in"+selected);
        ele2.style.display = "flex";
            e.target.classList.remove("open");
            e.target.classList.add("active");
        }
    }
        
    var btnscreate = document.getElementsByClassName("pdfpdf");
    for(var kk = 0;kk<btnscreate.length;kk++){
        var pp = btnscreate.item(kk);
        pp.addEventListener("click",newpdf,false);
    } 
        
    function newpdf(e){
        var selected = parseInt(e.target.id);
        var ele2 = document.getElementById("in"+selected);
        html2df()
        .from(ele2)
        .save();
    } 
    var btnssave = document.getElementsByClassName("savesave");
    for(var kkk = 0;kkk<btns.length;kkk++){
        var ppp = btnssave.item(kkk);
        ppp.addEventListener("click",savebook,false);
    }    
    function savebook(e){
        var selected = parseInt(e.target.id);
        var ele1 = document.getElementById("in"+selected);
        var oldlist1 = JSON.parse(localStorage.getItem("kedarparagraphs"));
        var tn = ele1.value;
    oldlist1[selected] = tn;
    localStorage.setItem("kedarparagraphs", JSON.stringify(oldlist1));  
    } 
    var btnscopy = document.getElementsByClassName("copycopy");
    for(var kkkk = 0;kkkk<btnscopy.length;kkkk++){
        var pppp = btnscopy.item(kkkk);
        pppp.addEventListener("click",copybook,false);
    }    
    function copybook(e){
        var selected = parseInt(e.target.id);
        var ele1 = document.getElementById("in"+selected);
        ele1.select();
        document.execCommand("copy");
    }
    function title1(){
        var page = prompt("enter serial no of book : ");
        if (page.length > 0 ){
            var oldlist11 = JSON.parse(localStorage.getItem("kedarbooktitles"));
            var pp = parseInt(page) - 1;
            var str = prompt("enter new title : ");
            if (pp <= oldlist11.length){
                if (str.length > 0){
                oldlist11[pp] = str;
                localStorage.setItem("kedarbooktitles",JSON.stringify(oldlist11));
                location.reload();
                 }   
            }else{
                alert(" sorry, we can't find book");
            }
        }
    }
    function delete1(){
        var serialno = prompt("enter serial number :")
        var listoftitles = JSON.parse(localStorage.getItem("kedarbooktitles"));
        
        var para = JSON.parse(localStorage.getItem("kedarparagraphs"));
        
        var n = parseInt(localStorage.getItem("numberof"));
        
    if (serialno.length > 0){
        var ss = parseInt(serialno) - 1 ;
        localStorage.setItem("numberof",n-1); 
        listoftitles.splice(ss,1);
        para.splice(ss,1);
        localStorage.setItem("kedarbooktitles",JSON.stringify(listoftitles));
        localStorage.setItem("kedarparagraphs",JSON.stringify(para));
        location.reload();
     }   
    }
    setInterval(function(){
    if (localStorage.getItem("numberof") != "0"){
           var d = document.getElementById("pop");
           d.style.display = "none";
        var ch = document.getElementById("change");
        var del = document.getElementById("del");
        ch.style.display = "block";
        del.style.display = "block";
       }else{
          var ch = document.getElementById("change");
         var del = document.getElementById("del");
        ch.style.display = "none";
        del.style.display = "none"; 
       }
    },10);
        
    </script>
    </body> 
</html>
