<html>
<head>
   <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000" />
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">
    <script src="jquery-3.6.0.min.js"></script>
    <!-- google fonts -->
    <title>save the square</title>
    <style>
        
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family: 'Poppins', sans-serif;
            user-select: none;
        }
        html{
            --x : 0;
            --y : 0;
            --sx : 30;
            --sy : 60;
            --sr : 0;
        }
        body {
            width: 100vw;
            height:100vh;
            overflow: hidden;
            display:flex;
            justify-content: center;
            align-items:center;
            flex-direction: column;
            background-color: white;
        }
        .flex{
            display: flex;
            justify-content:center;
            align-items: center;
            flex-direction: column;
        }
        p{
            font-size:14px;
            opacity:0.6;
        }
        .game{
            width:600px;
            height:350px;
            box-shadow:0 0 15px rgb(0,0,0,0.1);
            overflow: hidden;
            position:relative;
            background-color: ghostwhite;
        }
        .game.mobile{
            width:100vh;
            height:100vw;
            position: absolute;
            transform:rotateZ(90deg);
            box-shadow:0 0 15px rgb(0,0,0,0);
        }
        .camera{
            position: absolute;
            top:0;
            bottom:0;
            width:100%;
            height:100%;
            transform:translate(calc(var(--x) * 1px),calc(var(--y) * 1px));
            transition:0.5s;
        }
        .bg{
            position: absolute;
            width:100%;
            height:100%;
            background-image:linear-gradient(to bottom,rgb(0,0,0,0.45),rgb(255,255,255,0.3));
        }
        .ground,.wall{
            position: absolute;
            background-color: black;
            left:0;
            bottom:0;
        }
        .ground{
            width:100%;
            height:60px;
        }
        .wall{
            height:calc(100% + 70px);
            width:220px;
        }
        .blocks{
            position: absolute;
            left:220px;
            bottom:60px;
            height:calc(100% - 60px);
            min-width:calc(100% - 220px);
        }
        .levels{
            position: absolute;
            height:100%;
            min-width:100%;
            top:0;
            left:0;
        }
        .block,.player{
            position: absolute;
            background-color: black;
            bottom:0;
        }
        .player{
            width:100%;
            position: absolute;
            height:100%;
            background-color: black;
            width:25px;
            height:25px;
            box-shadow:0 0 5px rgb(0,0,0,0.3);
            bottom:60px;
            left:30px;
        }
        .player .circle{
            position: absolute;
            top:5px;
            right:5px;
            width:7px;
            height:7px;
            border-radius:50%;
            background-image:linear-gradient(220deg,rgb(255,255,255,1),rgb(255,255,255,0.8));
        }
        .piece{
            position: absolute;
            bottom:calc(var(--sy) * 1px);
            left:calc(calc(var(--sx) + 12.5) * 1px);
            background-color: black;
            width:calc(var(--wh) * 1px);
            height:calc(var(--wh) * 1px);
            transform:translateX(-50%) rotateZ(calc(1deg * var(--sr)));
            transition:0.5s;
            transition-delay:calc(1s * var(--s));
        }
        .buttons{
            position: absolute;
            bottom:20px;
            height:55px;
            width:100%;
            left:0;
        }
        .buttons .button{
            position: absolute;
            width:55px;
            height:55px;
            top:50%;
            transform:translateY(-50%);
            cursor:pointer;
            background-color:#8c8c8c;
        }
        .buttons img{
            width:25px;
            filter: invert(1);
        }
        .board{
            position: absolute;
            top:10px;
            right:20px;
            flex-direction: row;
        }
        .board .distance{
            margin-right:20px;
        }
        .board h2{
            font-size:17px;
            letter-spacing:1px;
        }
        .board h3{
            font-size:17px;
            text-align: right;
            color:white;
            text-shadow:0 0 3px rgb(0,0,0);
            letter-spacing:3px;
        }
        .board .pp{
            flex-direction: row;
            cursor:pointer;
            width:40px;
            height:40px;
            background-color:rgb(0,0,0,0.2);
        }
        .board .pp img{
            width:15px;
            filter:invert(1);
        }
        .board .pp img:nth-child(1){
            display: block;
        }
        .board .pp img:nth-child(2){
            display: none;
        }
        .board .pp.active img:nth-child(1){
            display: none;
        }
        .board .pp.active img:nth-child(2){
            display: block;
        }
        
    </style>
    </head>
<body>
  
  <section class="game">
    <div class="bg"></div>
    <section class="camera">
        <div class="ground"></div>
        <div class="wall"></div>
        <div class="blocks">
            <div class="levels">
                <div class="block" style="left:0px;height:60px;width:120px;"></div>
            </div>
            <div class="piece" style="--wh:10;--s:0.1;"></div>
            <div class="piece" style="--wh:9;--s:0.14"></div>
            <div class="piece" style="--wh:8;--s:.18"></div>
            <div class="piece" style="--wh:7;--s:0.22"></div>
            <div class="piece" style="--wh:6;--s:0.26"></div>
            <div class="piece" style="--wh:5;--s:0.30"></div>
            <div class="piece" style="--wh:4;--s:0.34"></div>
            <div class="piece" style="--wh:3;--s:0.38"></div>
            <div class="player"><div class="circle"></div></div>
        </div>
    </section>
    <div class="buttons">
            <div class="button flex" style="left:30px;">
                <img src="arrow-left-solid.svg">
            </div>
            <div class="button flex" style="left:90px;">
                <img src="arrow-right-solid.svg">
            </div>
            <div class="button flex" style="right:30px;" onclick="bt_jump()">
                <img src="arrow-up-solid.svg">
            </div>
    </div>
    <div class="board flex">
            <div class="distance">
                <h2>Distance</h2>
                <h3><span>0</span><label> .m</label></h3>
            </div>
            <div class="pp flex" onclick="control()">
                <img src="pause-solid.svg">
                <img src="play-solid.svg">
            </div>
        </div>
  </section>
  
  <p class='notice' style="margin-top:50px;">Use arrows to move left & right & jump</p>
  <p class='notice'>Use space bar to pause & play </p>
    
  
  <script>
      
      var audio_jump = new Audio("jump.mp3");
      audio_jump.volume = 0.2;
      
      let para = new URLSearchParams(window.location.search);
      if (parseInt(para.get('mobile')) == 1){
          document.body.style.backgroundColor = 'black';
          var game = document.querySelector('.game');
          game.classList.add("mobile");
          var notice = document.querySelectorAll('.notice');
          notice[0].style.display = 'none';
          notice[1].style.display = 'none';
      }else{
          var buttons = document.querySelector(".buttons");
          buttons.style.display = "none";
      }
      
      var game_control = true;
      
      function control(){
          var pp = document.querySelector(".pp");
          if (pp.classList.contains('active')){
              // play
              game_control = true;
          }else{
              // pause
              game_control = false;
          }
          pp.classList.toggle("active");
      }
      
      var player = document.querySelector('.player');
      var position = {x:30,y:60};
      
      function jump(){
          if (game_control){
              
              game_control = false;
//          $("body").get(0).style.setProperty("--sx", position.x);
          audio_jump.play();
          $("body").get(0).style.setProperty("--sy", position.y + 70);
          $("body").get(0).style.setProperty("--sr", 180);
          
          $('.player').animate({
              bottom : '+=70px'
          },600,function(){
              $("body").get(0).style.setProperty("--sy", position.y);
              $("body").get(0).style.setProperty("--sr", 360);
          });
          
          $('.player').animate({
              bottom : '-=70px'
          },600,function(){
              audio_jump.pause();
              game_control = true;
          });
              
          }
      }
      
      var camera_x = 0;
      var camera_y = 0;
      
      function camera_up(){
          camera_x += 0;
          camera_y += 30;
          $("body").get(0).style.setProperty("--x", camera_x);
          $("body").get(0).style.setProperty("--y", camera_y);
          setTimeout(function(){
              camera_x += 0;
              camera_y -= 30;
              $("body").get(0).style.setProperty("--x", camera_x);
              $("body").get(0).style.setProperty("--y", camera_y);
          },500);
      }
      
      function bt_jump(){
          if (game_control){
              jump();
              camera_up();
          }
      }
      
      const moveright = setInterval(function(){
          $('.square').animate({
              bottom : '+=70px'
          },400);
      },100);
      
      const moveleft = setInterval(function(){
          
      },100);
      
      window.addEventListener('keydown',(e) => {
//          left arrow	37
//          up arrow	38
//          right arrow	39
//          space 	    32
          if (e.keyCode == 38){
              if (game_control){
                  jump();
                  camera_up();
              }
          }else if (e.keyCode == 37){
              if (game_control){
                  moveleft;
              }
          }else if (e.keyCode == 39){
              if (game_control){
                  moveright;
              }
          }else if (e.keyCode == 32){
              control();
          }
                    
      });
      
      window.addEventListener('keyup',(e) => {
          
      });
      
  </script>
  
</body>
</html>




<!--

<a href="https://www.hitwebcounter.com" target="_blank" class="c">
<img src="https://hitwebcounter.com/counter/counter.php?page=7711238&style=0001&nbdigits=6&type=ip&initCount=0" title="Total Website Hits" Alt="Web Hits"   border="0" /></a>

22,001


-->
