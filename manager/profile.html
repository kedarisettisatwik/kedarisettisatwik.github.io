<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">
    <!-- google fonts -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css" integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
    
    <title>network</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            list-style:none;
            text-decoration:none;
        }
        html {
            scroll-behavior: smooth;
        }
        ::-webkit-scrollbar{
            width:5px;
        }
        ::-webkit-scrollbar-thumb{
            background-color:black;
        }
        .flex{
            display:flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .bg{
            background-position: center;
            background-repeat: no-repeat;
            background-size:cover;
        }
        body{
            width:100vw;
            height: 100vh;
            background-color:lavenderblush;
            overflow: hidden;
        }
        .container{
            height:100%;
            position: relative;
            width:100%;
            background-color:lavenderblush;
            box-shadow:0 0 10px rgb(0,0,0,0.4);
            justify-content: flex-start;
           overflow: hidden;
        }
        .profile_logo{
            width:55px;
            height:55px;
            padding:5px;
            box-shadow:0 0 10px rgb(0,0,0,0.4);
            object-fit: cover;
            background-color:white;
            border-radius:50%;
        }        
        .pop_page{
            position: absolute;
            z-index:-100;
            opacity:0;
            justify-content: flex-start;
            height:100%;
            width:100%;
            overflow-x: hidden;
            overflow-y: auto;
            background-color:white;
            transition:0.4s;
        }
        .pop_page.active{
            z-index:100;
            opacity:1;
        }
        #logo{
            justify-content: center;
            align-items: center;
        }
        #logo.active{
            z-index:10000;
            opacity:1;
        }
        #logo img{
            width:70px;
        }
       
/* profile page */
        #my_profile{
            width:100%;
            justify-content: flex-start;
            max-height:100%;
            overflow-x: hidden;
            overflow-y: auto;
            background-color: white;
        }
        #my_profile .box1{
            background-color: white;
            position:relative;
            width:100%;
            margin-bottom:20px;
        }
        #my_profile .box1 img{
            background-color:white;
            width:100%;
            max-height:80vh;
            object-fit: cover;
            border-radius:0;
        }
        #my_profile .box1 h2{
            padding:13px;
            position: absolute;
            padding-left:20px;
            font-size:19px;
            color:white;
            background-image:linear-gradient(rgb(0,0,0,0.7),rgb(0,0,0,0.8));
            font-weight:500;
            letter-spacing:1px;
            bottom:10px;
            left:10px;
        }
        #my_profile #link_edit{
            width:100%;
            position:relative;
            margin:10px;
            padding:10px;
        }
        #my_profile #link_edit p{
            width: 100%;
            padding: 10px;
            margin: 0 0 10px 0;
            font-size: 14px;
        }  
        #my_profile #link_edit .inp{
            width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }  
        #my_profile #link_edit .inp input{
            width: 90%;
            padding: 10px;
        } 
        #my_profile #link_edit button{
            margin: 10px;
            padding: 20px;
            background-color: cadetblue;
            color: white;
            font-size: 16px;
            font-weight: bold;
            letter-spacing: 1px;
            cursor: pointer;
            border: none;
            outline: none;
            box-shadow: 0 0 10px rgb(0 0 0 / 40%);
            margin-top: 20px;
        }  
        #my_profile #link_edit .inp i{
            position: absolute;
            bottom: 0;
            right: 10px;
            transform: translate(0px, 50%);
            width: 45px;
            height: 45px;
            background-color: blue;
            font-size: 23px;
            color: white;
            border-radius: 50%;
            line-height: 45px;
            text-align: center;
            box-shadow: 0 0 10px rgb(0 0 0 / 40%);
            cursor: pointer;
        }  
        #my_profile .box2{
            position:relative;
            border-top:2px dashed rgb(0,0,0,0.4);
            width:100%;
            padding:25px 10px;
            margin:0px;
        }
        #my_profile .box2 h2, #my_profile .box3 h2{
            min-width:250px;
            width:90%;
            font-size:19px;
            font-weight:500;
            letter-spacing:1px;
            margin:5px;
        }
        #my_profile .box2 .mail{
            margin-top:8px;
            min-width:250px;
            width:90%;
            padding:10px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            flex-direction:row;
            padding-left:15px;
            font-size:17px;
        }
        #my_profile .box2 .mail i{
            margin-right:10px;
            font-size:22px;
        }
        #my_profile #add_details{
            padding:10px;
            width:90%;
            min-width:250px;
            margin-bottom:10px 0;
        }
        #my_profile #add_details p{
            margin:10px 0;
            font-size:16px;
             white-space: pre-wrap;
        }
        #my_profile #add_details p i{
            font-size:23px;
            margin:0 10px;
        }
        #my_profile .box3{
            padding:25px 0 10px 0;
            width:100%;
            margin:25px 0 10px 0;
            border-top:2px dashed rgb(0,0,0,0.4);
            position:relative;
        }
        #my_profile .box3 #media_links1{
            width:90%;
            margin-top:10px;
            min-width:250px;
            flex-direction: row;
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        #my_profile .box3 #media_links1 a{
            width:40px;
            height:40px;
            cursor:pointer;
            line-height:40px;
            text-align: center;
            font-size:25px;
            margin:10px;
            display:flex;
            color:rebeccapurple;
            transition:0.2s;
        }
        #my_profile .box3 #media_links1 a:hover{
            color:red;
        }
        #my_profile .other_links{
            width:90%;
            min-width:300px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: row;
            flex-wrap: wrap;
        }
        #my_profile .other_links a{
            margin:10px;
            cursor:pointer;
            padding:10px;
            transition:0.3s;
            color:rebeccapurple;
        }
        #my_profile .other_links a:hover{
            color:red;
        }
        .notes_box{
            position:relative;
            width:100%;
            margin-bottom:20px;
            padding:10px;
        }
        .note{
            margin:10px;
            padding:10px;
            width:100%;
            min-width:300px;
            border-top:2px dashed rgb(0,0,0,0.4);
            max-height:50vh;
            overflow-x: hidden;
            padding-top:30px;
            overflow-y: auto;
        }
        .note h1{
            width:95%;
            font-size:18px;
            margin-bottom:13px;
            font-weight:700;
        }
        .note p{
            width:95%;
            font-size:16px;
            white-space: pre-wrap;
        }
        .fa-long-arrow-alt-left{
            font-size:23px;
            z-index:100;
            position: absolute;
            top:20px;
            left:30px;
            width:50px;
            height:50px;
            line-height:55px;
            text-align: center;
            background-color:white;
            box-shadow:0 0 5px rgb(0,0,0,0.4);
            cursor: pointer;
            border-radius:50%;
        }
/* profile page */
    
    </style>
</head>

<body class="flex">
    
<section class="container flex">
    
    <section class="flex pop_page active" id="my_profile">
         <div class="box1">
                <i class="fas fa-long-arrow-alt-left" onclick="back1()"></i>
                <img class="profile_img" src="" id="profile_img">
                <h2 id="profile_name"></h2>
         </div>
         <div id="link_edit" class="flex">
            <p> You can share your profile to any one who don't have account in network also,<br> using below link </p>
             <div class="inp">
                 <input type="text" id="link_share">
                 <i class="far fa-copy" onclick="copy2()"></i>
             </div>
             <button onclick="edit_p()">Edit my page</button>
         </div>
         <div class="box3 flex">
            <h2>Media & other links </h2>
             <ul id="media_links1">
               
            </ul>
            <div class="other_links" id="other_links">
                
            </div>
         </div>
         <div class="box2 flex">
             <h2>About me ! </h2>
             <div class="mail">
                 <i class="fas fa-envelope"></i>
                 <p id="profile_mail"></p>
             </div>
             <div id="add_details">
                 
             </div>
         </div>
         <div class="book_box flex">
             <div class="notes_box flex" id="notes_box">
             
         </div>
         </div>
    </section>

</section>

<script src="https://www.gstatic.com/firebasejs/8.7.0/firebase.js"></script>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyARQ2BkDwc8ET4ElFTx4tv3huFGTXs75xY",
    authDomain: "network-c2f65.firebaseapp.com",
    projectId: "network-c2f65",
    storageBucket: "network-c2f65.appspot.com",
    messagingSenderId: "565713313358",
    appId: "1:565713313358:web:3935560cb111b6b83f6d1f"
  };
  firebase.initializeApp(firebaseConfig);
    
    const auth = firebase.auth();
    const base = firebase.database();
    
</script>
    
    <script>
        
        const myurl = new URL(window.location.href);
        let user_id = myurl.searchParams.get("user_name");
        let other_id = myurl.searchParams.get("other");
        
         draw_profile(user_id,other_id);
        
        if (user_id != other_id){
            var link_edit = document.getElementById("link_edit");
            link_edit.style.display = "none";
        }else{
            var link_share = document.getElementById("link_share");
            link_share.value = "https://kedarisettisatwik.github.io/manager/public.html?user_name="+user_id;
        }
        
        firebase.database().ref('users/'+user_id).once('value',function(snapshot){
                user_name = snapshot.val().name;
                var user_dp = snapshot.val().dp;
                var profile_logo = document.querySelectorAll(".profile_logo");
                for(var i = 0;i<profile_logo.length;i++){
                    profile_logo[i].src = user_dp;
                }
        });
        
         var   profile_img = document.getElementById("profile_img");
              var profile_name = document.getElementById("profile_name"); 
              var media_links1 = document.getElementById("media_links1");
              var other_links = document.getElementById("other_links");
              var profile_mail = document.getElementById("profile_mail");
              var add_details = document.getElementById("add_details");
              var notes_box = document.getElementById("notes_box");
        
         function draw_profile(a,b){
             
             firebase.database().ref('users/'+a).once('value',function(snapshot){
               var  draw_user_name = snapshot.val().name;
               var draw_user_img = snapshot.val().dp;
                 profile_img.src = draw_user_img;
                 profile_name.innerHTML = draw_user_name;
            });
             
             firebase.database().ref('users/'+a).once('value',function(snapshot){
                  var  draw_user_mail = snapshot.val().email;
               profile_mail.innerHTML = draw_user_mail; 
            });
             
            firebase.database().ref("users/"+a+"/medialinks").once('value',function(snapshot){
                media_links1.innerHTML = "";
         snapshot.forEach(function(ChildSnapShot){
            var title1 = ChildSnapShot.val().title;
            var href1 = ChildSnapShot.val().link;
             
             if (title1 == "facebook"){ 
        media_links1.innerHTML += "<li><a target='_blank' href='"+href1+"'><i class='fab fa-facebook-square'></i></a></li>";
            }else if (title1 == "instagram"){
        media_links1.innerHTML += "<li><a target='_blank' href = '"+href1+"'>"+"<i class='fab fa-instagram'></i>"+"</a></li>";
            }else if (title1 == "twitter"){
        media_links1.innerHTML += "<li><a target='_blank' href = '"+href1+"'>"+"<i class='fab fa-twitter'></i>"+"</a></li>";
            }else if (title1 == "youtube"){
        media_links1.innerHTML += "<li><a target='_blank' href = '"+href1+"'>"+"<i class='fab fa-youtube'></i>"+"</a></li>";
            }
             
        });
            });
           
         firebase.database().ref("users/"+a+"/otherlinks").once('value',function(snapshot){
                other_links.innerHTML = "";
         snapshot.forEach(function(ChildSnapShot){
             var link_hr = ChildSnapShot.val().link;
             var title_hr = ChildSnapShot.val().title;
             other_links.innerHTML += "<a target='_blank' href='"+link_hr+"'>"+title_hr+"</a>";
        });
            });
             
        firebase.database().ref("users/"+a+"/details").once('value',function(snapshot){
                add_details.innerHTML = "";
            
         snapshot.forEach(function(ChildSnapShot){
            var line1 = ChildSnapShot.val().para;
             add_details.innerHTML += "<p>"+line1+"</p>";
        });
            });
             
            firebase.database().ref("users/"+a+"/notes").once('value',function(snapshot){
                notes_box.innerHTML = "";
            
         snapshot.forEach(function(ChildSnapShot){
             var heading = ChildSnapShot.val().title;
             var content = ChildSnapShot.val().para;
              var mo11 = ChildSnapShot.val().mode;
             
             if (a == b){
                 notes_box.innerHTML += "<div class='note'><h1>"+heading+"</h1><p>"+content+"</p></div>";   
             }else{
                 if (mo11 == "0" || mo11 == 0){
                notes_box.innerHTML += "<div class='note'><h1>"+heading+"</h1><p>"+content+"</p></div>";   
                  }
             }
        });
            });
             
             
         }
        
        function back1(){
            window.history.go(-1);
        }
        
        function copy2(){
            var link_to_invite = document.getElementById("link_share");
            link_to_invite.select();
            document.execCommand("copy");
        }
        
        function edit_p(){
            var lip = "edit.html?user_name="+user_id;
            location.href = lip;
        }

        window.addEventListener("contextmenu", (e) => {
         //  e.preventDefault();
        })
        
    </script>
    
</body>
</html>
