<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/d867b74fd4.js" crossorigin="anonymous"></script>
    <link rel="shortcut icon" href="logo.png" type="image">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400&display=swap" rel="stylesheet">
    <!-- google fonts -->
    
    <title>manager</title>


    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
            border: none;
        }

        ::-webkit-scrollbar {
            width: 5px;
        }

        ::-webkit-scrollbar-thumb {
            border-radius:5px;
            background-color: blue;
        }

        .flex {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: aliceblue;
            justify-content: flex-start;
        }

        .main {
            position: relative;
            width: 400px;
            height: 95%;
            background-color: white;
            box-shadow: 0 0 10px rgb(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /*       account      */
        
        #account{
            overflow-x: hidden;
            overflow-y: auto;
            width:100%;
            height:100%;
            display: flex;
            position:relative;
            background-color: white;
            flex-direction: column;
        }
        #account form{
            position: absolute;
            width:100%;
            height:100%;
            background-color:white;
            top:0;
            left:0;
            transition:0.4s;
            transform:translateX(100%);
            justify-content: flex-start;
            flex-direction: column;
            overflow-x: hidden;
            overflow-y: auto;
        }
        #account form.active{
            transform:translateX(0);
        }
        #account #signin{
            background-image:linear-gradient(rgb(204, 0, 255),rgb(153, 51, 255));
        }
        #account #signup{
            background-image:linear-gradient(rgb(255, 51, 153),rgb(255, 0, 102));
        }
        #account form .inp{
            width:93%;
            min-width:300px;
            background-image:linear-gradient(to left,rgb(255,255,255,0.4),rgb(255,255,255,0.5));
            height:50px;
            border-radius:25px;
            margin:10px;
            box-shadow:0 0 5px rgb(0,0,0,0.4);
            position:relative;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            flex-direction: row;
        }
        #account form .inp input{
            width:calc(100% - 60px);
            height:100%;
            background-color:transparent;
            outline:none;
            border:none;
            font-size:16px;
            padding:10px;
            padding-left:20px;
            color:white;
            letter-spacing:1px;
        }
        #account form .inp input::placeholder{
            color:white;
        }
        #account form .inp input[type="submit"]{
            height:100%;
            background-color:white;
            outline:none;
            border:none;
            font-size:19px;
            border-radius:25px;
            letter-spacing:1px;
            padding:0;
            width:100%;
            font-weight:bold;
            letter-spacing:1px;
            cursor:pointer;
        }
        #account #signin .inp input[type="submit"]{
            color:darkviolet;
        }
        #account #signup .inp input[type="submit"]{
            color:chocolate;
        }
        #account form .inp .icon{
            width:45px;
            height:45px;
            border-radius:50%;
            background-color: white;
            font-size:19px;
            margin-left:2.5px;
            line-height:45px;
            text-align: center;
        }
        #account #signin .inp .icon,#account #signin .inp .icon1{
            color:purple;
        }
        #account #signup .inp .icon, #account #signup .inp .icon1{
            color:chocolate;
        }
        #account form p{
            padding:10px;
            color:white;
            margin:10px;
            cursor:pointer;
            font-size:15px;
            font-weight:bold;
            letter-spacing:1px;
            margin-bottom:30px;
        }
        #account form h2{
            margin:10px;
            margin-bottom:20px;
            font-size:20px;
            font-weight:bold;
            letter-spacing:1px;
            color:white;
            width:80%;
            padding:10px;
            border:2px solid white;
        }
        #account form .flex{
            width:100%;
            margin-top:0;
            margin-bottom:20px;
            justify-content: space-between;
        }
        #account form .img1, #account form .img2{
            position: relative;
            width:150px; 
            padding:10px;
            border:2px solid white;
            margin-left:10px;
            border-top:none;
            border-right:none;
            border-bottom-left-radius:75px;
        }
        #account ion-icon{
            position: absolute;
            top:30px;
            right:20px;
            color:white;
            font-size:30px;
            cursor:pointer;
        }
        #account form .logo{
            width:60px;
            margin:0 10px;
            margin-left:25px;
        }


/*       account      */
        
        #home {
            position: relative;
            width: 100%;
            height: 100%;
            display: none;
        }
        
        

        @media (max-width:400px) {
            .main {
                width: 100%;
                height: 100%;
            }
        }

    </style>
</head>

<body class="flex">

    <section class="main">

        <section id="account" class="flex">

            <form autocomplete="off" id="signin" class="flex active">
                <div class="flex">
                    <img src="logo.png" class="logo">
                    <img src="accountbg.png" class="img1">
                </div>
                <ion-icon name="help-circle-sharp" onclick="help1()"></ion-icon>
                <h2>Network</h2>
                <div class="inp">
                    <div class="icon"><i class="far fa-envelope"></i></div>
                    <input type="email" placeholder="E-mail @gmail.com" required id="in_email">
                </div>
                <div class="inp">
                    <div class="icon"><i class="fas fa-key"></i></div>
                    <input type="password" placeholder="password ****" required id="in_pass">
                </div>
                <div class="inp">
                    <input type="submit" value="SIGN IN">
                </div>
                <p onclick="form_toggle()">New User ? </p>
            </form>

            <form autocomplete="off" id="signup" class="flex">
                <div class="flex">
                    <img src="logo.png" class="logo">
                    <img src="signup.png" class="img2">
                </div>
                <ion-icon name="help-circle-sharp" onclick="help1()"></ion-icon>
                <div class="inp">
                    <div class="icon"><i class="fas fa-user"></i></div>
                    <input type="text" placeholder="Name" required id="up_name">
                </div>
                <div class="inp">
                    <div class="icon"><i class="far fa-envelope"></i></div>
                    <input type="email" placeholder="E-mail @gmail.com" required id="up_mail">
                </div>
                <div class="inp">
                    <div class="icon"><i class="fas fa-lock"></i></div>
                    <input type="password" placeholder="password ****" required id="up_pass">
                </div>
                <div class="inp">
                    <div class="icon"><i class="fas fa-key"></i></div>
                    <input type="text" placeholder="confirm - password" required id="up_repass">
                </div>
                <div class="inp">
                    <input type="submit" value="SIGN IN">
                </div>
                <p onclick="form_toggle()">Already Have Account !</p>
            </form>

        </section>
        
        <section id="home" class="flex">
            <iframe src="" width="100%" height="100%" id="frame_i"></iframe>
        </section>

    </section>



    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase.js"></script>

    <script>
    var firebaseConfig = {
    apiKey: "AIzaSyARQ2BkDwc8ET4ElFTx4tv3huFGTXs75xY",
    authDomain: "network-c2f65.firebaseapp.com",
    projectId: "network-c2f65",
    storageBucket: "network-c2f65.appspot.com",
    messagingSenderId: "565713313358",
    appId: "1:565713313358:web:3935560cb111b6b83f6d1f"
    };
    firebase.initializeApp(firebaseConfig);
    
    const auth = firebase.auth();
    const base = firebase.database();
    
    </script>
    
    <script>
        
        var sound1 = new Audio();
        sound1.src = "sound.mp3";
        
        var account_p = document.getElementById("account");
        var home_p = document.getElementById("home");
        var frame_i = document.getElementById("frame_i");


        function form_toggle() {
            var two = document.getElementById("signup");
            two.classList.toggle("active");
        }

        var signin = document.getElementById("signin");
        var signup = document.getElementById("signup");

        var date_s = false;
        var  key_t = "";
        
        sessionStorage.clear();
        
        signin.addEventListener("submit", (e) => {
              e.preventDefault();
            
            var sign_in_email = document.getElementById("in_email").value;
            var sign_in_password = document.getElementById("in_pass").value;
            
            auth.signInWithEmailAndPassword(sign_in_email,sign_in_password)
                    .then(function(){
                        var user = auth.currentUser;
                        var user_ref = base.ref();
                
                        alert("signed in succesfully");
                        user_key = user.uid;
                sessionStorage.setItem("kedar_chat_user_key",user_key);
                account_p.style.display = "none";
                home_p.style.display = "flex";
                frame_i.src = "tasks.html";
                
                date_s = true;
                key_t = user_key;
                sound1.play();
    firebase.database().ref('users/'+user_key+"/unseen1").on("child_added",function(snapshot){ 
                    sound1.play();                
        });
                    })
                    .catch(function(error){
                        var err_code = error.code;
                        var err_msg = error.message;
                        alert(err_msg);
                })
        });

        signup.addEventListener("submit", (e) => {
            e.preventDefault();
            
            
            var sign_up_name = document.getElementById("up_name").value;
            var sign_up_email = document.getElementById("up_email").value;
            var sign_up_password = document.getElementById("up_pass").value;
            var sign_up_repassword = document.getElementById("up_repass").value;

            if (sign_up_name.length > 3){
                if (sign_up_password.length > 6){
                if (sign_up_password == sign_up_repassword){
                    
                    auth.createUserWithEmailAndPassword(sign_up_email,sign_up_password)
                    .then(function(){
                        var user = auth.currentUser;
                        var user_ref = base.ref();
                        var user_data = {
                            key : user.uid,
                            email : sign_up_email,
                            name : sign_up_name,
                            dp:"avatars/p14.png",
                        }
                        
         firebase.database().ref('users/'+user.uid).set(user_data);
                        
         firebase.database().ref('users/'+user.uid+"/follow").push({
             name : user.uid,
         });
                        
        firebase.database().ref('users/'+user.uid+"/active/"+user.uid).set({
            dateun : Date.now()
         });
            
        firebase.database().ref('users/'+user.uid+"/unseen1/"+user.uid).set({
            dateun : Date.now(),
         });
                        
                        alert("account created succesfully");
                    
                        date_s = true;
                      key_t = user_key;
                        sound1.play();
                        
    firebase.database().ref('users/'+user_key+"/unseen1").on("child_added",function(snapshot){ 
                    sound1.play();                
        });
                        
     sessionStorage.setItem("kedar_chat_user_key",user_key);
                     
                firebase.auth().currentUser.sendEmailVerification().then( () => {
                        console.log("email verify");
                        
                    account_p.style.display = "none";
                    home_p.style.display = "flex";
                    frame_i.src = "tasks.html";
                    
                        
                    }).catch(function(error){
                        var ee1 = error.code;
                        var ee2 = error.message;
                        alert(ee2);
                        console.log(ee1);
                    })
                        
                    })
                    .catch(function(error){
                        var err_code = error.code;
                        var err_msg = error.message;
                        alert(err_msg);
                    })
                    
                }else{
                    alert("password confirmation failed");
                }
            }else{
                alert("password must be altest 7 characters..")
            }
            }else{
                alert("user name should be atleast of 3 characters");
            }
            
        });
        
        function help1() {
            // you tube link
        }
        
        function date_set(a){
            
            var date1 = new Date().getDate();
                    var month1 = new Date().getMonth();
                    var year1 = new Date().getFullYear();
                    var hour = new Date().getHours();
                    var minute = new Date().getMinutes();
                    
            var mo_li = ["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dec"];
     var dd1 = date1 + " " + mo_li[month1] + " " + year1 + " | "+hour + " : " +minute;
                    
        firebase.database().ref("users/"+a).update({
                          datein : dd1,
                   });
        }
        
        setInterval(function(){
           if(date_s){
               date_set(key_t);
           } 
        },30000);
        
    </script>

</body>

</html>

